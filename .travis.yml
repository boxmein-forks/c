if: tag IS present

language: generic

env:
    global:
        - IS_RELEASE=$(git ls-remote origin | grep "$TRAVIS_COMMIT\s\+refs/heads/master")

services:
  - docker

deploy:
  - provider: script
    script: server/travis.sh
    on:
      tags: true

jobs:
  include:
    - stage: GitHub Release
      if: branch = master
      script: ./travis.sh
      deploy:
        provider: releases
        file_glob: true
        file: dist/*
        api_key: $GITHUB_OAUTH_TOKEN
        skip_cleanup: true